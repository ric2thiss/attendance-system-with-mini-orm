<!DOCTYPE html>
<html>
<body>

    <div id="messages"></div>
    <input type="text" id="message">
    <button id="sendMsg">Send Message</button>

<script>
const ws = new WebSocket('ws://localhost:8080');
const messages = document.getElementById("messages");
const message = document.getElementById("message");
const sendMsg = document.getElementById("sendMsg");

sendMsg.addEventListener("click", ()=>{
    if(message.value === ""){
        return;
    }

    ws.send(message.value)
    message.value = ""
    
})

// Listen for server messages
ws.onmessage = (event) => {
    const arr = JSON.parse(event.data);

    messages.innerHTML = ""; // clear old messages

    arr.forEach(msg => {
        const p = document.createElement("p");
        p.textContent = msg;
        messages.appendChild(p);
    });
};
// function displayMessages(data) {
//     let arr = Array.isArray(data) ? data : JSON.parse(data);

//     const p = document.createElement("p");
//     p.textContent = arr.join(", "); 
//     messages.appendChild(p);
// }


// ws.onopen = () => {
//   console.log('Connected');
//   ws.send(JSON.stringify({type : "chat", message : "Hello Server I am fron client"}));
// };
// ws.onmessage = (e) => console.log('From server:', e.data);

// ws.onmessage = (event) => {
//   const data = JSON.parse(event.data);
//   console.log("ðŸ“© Data from server:", data);
// };

// ws.onopen = () => {
//     console.log("Connected")
// }

// ws.onmessage = (e) => console.log(e.data);

// ws.onerror = function(e) {
//     console.log(e.code, e.reason)
// }

</script>
</body>
</html>
